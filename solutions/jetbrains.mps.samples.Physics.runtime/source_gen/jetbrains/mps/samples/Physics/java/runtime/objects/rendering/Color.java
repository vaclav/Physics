package jetbrains.mps.samples.Physics.java.runtime.objects.rendering;

/*Generated by MPS */

import com.badlogic.gdx.graphics.glutils.ShapeRenderer;
import com.badlogic.gdx.graphics.g2d.Batch;

public class Color implements RenderableMetric {
  public final int r;
  public final int g;
  public final int b;
  private ShapeRenderer renderer = new ShapeRenderer();

  public Color(int r, int g, int b) {
    this.r = r;
    this.g = g;
    this.b = b;
  }

  public Color merge(float selfRatio, Color color) {
    float rev = 1 - selfRatio;
    return new Color((int) (r * selfRatio + color.r * rev), (int) (g * selfRatio + color.g * rev), (int) (b * selfRatio + color.b * rev));
  }

  public com.badlogic.gdx.graphics.Color toGdxColor() {
    return new com.badlogic.gdx.graphics.Color(r / 255.f, g / 255.f, b / 255.f, 1);
  }

  public static Color merge(Color left, Color right, float leftRatio) {
    if (left == null && right == null) {
      return null;
    }

    float rev = 1 - leftRatio;
    if (left == null) {
      left = new Color(0, 0, 0);
    }
    if (right == null) {
      right = new Color(0, 0, 0);
    }

    return new Color((int) (left.r * leftRatio + right.r * rev), (int) (left.g * leftRatio + right.g * rev), (int) (left.b * leftRatio + right.b * rev));
  }

  @Override
  public float render(Batch batch, float leftX, float topY, float lineHeight) {
    batch.end();
    renderer.begin();
    renderer.setColor(toGdxColor());
    renderer.rect(leftX, topY, lineHeight, lineHeight - 3);
    renderer.end();
    batch.begin();
    return 0;
  }
}
