package jetbrains.mps.samples.Physics.java.runtime.objects;

/*Generated by MPS */

import jetbrains.mps.samples.Physics.java.runtime.objects.forces.Force;

/**
 * Builder for world
 */
public class WorldBuilder {
  private World world;
  private PhysicalEntity currentEntity;
  public WorldBuilder() {
    world = new World(6);
  }
  public WorldBuilder createEntity(String name, SystemScope scope) {
    if (currentEntity != null) {
      world.addEntity(currentEntity);
    }
    currentEntity = new PhysicalEntity(world, name, scope);
    return this;
  }
  public WorldBuilder withForce(Force force) {
    assertEntity().getForces().add(force);
    return this;
  }
  public WorldBuilder withInitialPosition(double x, double y, double z) {
    assertEntity().getBody().setPosition(x, y, z);
    return this;
  }
  public WorldBuilder withInitialSpeed(double x, double y, double z) {
    assertEntity().getBody().setLinearVel(x, y, z);
    return this;
  }
  public World build() {
    if (currentEntity != null) {
      world.addEntity(currentEntity);
      currentEntity = null;
    }
    return world;
  }
  private PhysicalEntity assertEntity() {
    if (currentEntity == null) {
      throw new IllegalStateException("calling entity method with no entity initialized");
    }
    return currentEntity;
  }
}
